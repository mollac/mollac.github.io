<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLIP CLOCK</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Roboto Mono', monospace !important;
        }

        :root {
            --clock-size: min(18vw, 35vh);
        }

        body {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            min-height: 100vh;
            color: white;
            display: flex;
            flex-direction: column;
            transition: background 1s ease;
            text-transform: uppercase;
        }

        .weather-bar {
            padding: clamp(15px, 12px + 1vw, 30px);
            background: rgba(0, 0, 0, 0.3);
        }

        .weather-icon {
            width: clamp(24px, 5vw, 64px);
            height: clamp(24px, 5vw, 64px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(16px, 4vw, 40px);
        }

        .weather-temp {
            font-size: clamp(16px, 4vw, 42px);
            font-weight: bold;
        }

        .clock-section {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .clock-wrapper {
            background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
            padding: 2vmin 3vmin;
            border-radius: 30px;
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.8),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 3px solid #1a1a1a;
        }

        .clock-container {
            display: flex;
            gap: 2vmin;
            align-items: center;
        }

        .flip-unit {
            position: relative;
            width: var(--clock-size);
            height: calc(var(--clock-size) * 1.4);
            perspective: 1000px;
        }

        .digit {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: calc(var(--clock-size) * 0.8);
            line-height: 1;
            font-weight: 700;
            color: var(--digit-color, #ffffff);
            background: linear-gradient(180deg, #4a4a4a 0%, #3a3a3a 50%, #2a2a2a 50%, #1a1a1a 100%);
            border-radius: 20px;
            box-shadow:
                0 5px 15px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
            border: 2px solid #0a0a0a;
        }

        /* Fels≈ë f√©l */
        .digit::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 50%;
            top: 0;
            left: 0;
            background: linear-gradient(to bottom, rgba(80, 80, 80, 0.2) 0%, rgba(0, 0, 0, 0) 100%);
            z-index: 1;
        }

        /* K√∂z√©ps≈ë v√°g√°s */
        .digit::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 4px;
            background: #0a0a0a;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            z-index: 10;
            box-shadow:
                0 2px 4px rgba(0, 0, 0, 0.8),
                inset 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Oldals√≥ tart√≥k */
        .flip-unit::before,
        .flip-unit::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 20px;
            background: linear-gradient(90deg, #1a1a1a 0%, #2a2a2a 50%, #1a1a1a 100%);
            top: 50%;
            transform: translateY(-50%);
            z-index: 20;
            border-radius: 2px;
            box-shadow:
                inset 0 1px 2px rgba(0, 0, 0, 0.5),
                0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .flip-unit::before {
            left: -4px;
        }

        .flip-unit::after {
            right: -4px;
        }

        .flip-card {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .flip-card.flipping {
            animation: flip 0.6s ease-in-out;
        }

        @keyframes flip {
            0% {
                transform: rotateX(0deg);
            }

            100% {
                transform: rotateX(-180deg);
            }
        }

        .separator {
            font-size: calc(var(--clock-size) * 0.8);
            line-height: 1;
            font-weight: 700;
            margin: 0 1vmin;
            color: var(--digit-color, #ffffff);
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            animation: blink 1s step-start infinite;
        }

        @keyframes blink {

            0%,
            49% {
                opacity: 1;
            }

            50%,
            100% {
                opacity: 0;
            }
        }

        .status-bar {
            padding: clamp(15px, 12px + 1vw, 30px);
            background: rgba(0, 0, 0, 0.3);
        }

        .bottom-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            width: 100%;
        }

        .date-info {
            font-size: clamp(14px, 3vw, 32px);
            text-align: left;
        }

        .day-name-info {
            font-size: clamp(16px, 4vw, 42px);
            font-weight: bold;
            text-align: center;
        }

        .nameday-info {
            font-size: clamp(14px, 3vw, 32px);
            text-align: right;
        }

        .countdown-info {
            font-size: clamp(14px, 3vw, 32px);
            font-weight: bold;
            margin-bottom: 0;
            color: var(--digit-color, #ffffff);
        }

        .next-class-info {
            font-size: clamp(14px, 3vw, 32px);
            font-weight: bold;
            margin-bottom: 0;
            color: var(--digit-color, #ffffff);
        }

        /* Tablet √©s kisebb */
        @media (max-width: 992px) {
            .clock-wrapper {
                padding: 2vmin;
            }

            .flip-unit {}

            .digit {}

            .digit::after {
                height: 3px;
            }

            .flip-unit::before,
            .flip-unit::after {
                width: 6px;
                height: 16px;
            }

            .separator {}

        }

        /* Mobil */
        @media (max-width: 576px) {
            .clock-wrapper {
                border-radius: 20px;
            }

            .flip-unit {}

            .digit {
                border-radius: 12px;
            }

            .digit::after {
                height: 2px;
            }

            .flip-unit::before,
            .flip-unit::after {
                width: 4px;
                height: 12px;
            }

            .separator {}

            .clock-container {
                gap: 1vmin;
            }
        }

        /* Nagyon kicsi mobil */
        @media (max-width: 380px) {
            .flip-unit {}

            .digit {}

            .separator {}

        }

        .fullscreen-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .settings-btn {
            position: fixed;
            top: 20px;
            left: 80px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s, transform 0.5s ease;
        }

        .settings-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(180deg);
        }

        .clock-mode-btn {
            top: 20px;
            left: 140px;
        }

        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .settings-panel {
            background: #2a2a2a;
            padding: 25px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid #444;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .schedule-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 10px;
        }

        .schedule-row input {
            background: #444;
            border: 1px solid #555;
            color: white;
            padding: 5px;
            border-radius: 5px;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .btn:hover {
            opacity: 0.8;
        }

        .btn-primary {
            background: #4caf50;
            color: white;
        }

        .btn-secondary {
            background: #666;
            color: white;
        }

        .btn-danger {
            background: #ff4444;
            color: white;
        }

        /* Analog Clock Styles */
        .analog-clock-wrapper {
            display: none;
            width: min(80vw, 63vh);
            height: min(80vw, 63vh);
            background: radial-gradient(circle at 30% 30%, #ffffff, #d0d0d0);
            border-radius: 50%;
            box-shadow:
                0 30px 60px rgba(0, 0, 0, 0.6),
                inset 0 0 20px rgba(0, 0, 0, 0.1),
                inset 10px 10px 20px rgba(255, 255, 255, 0.8),
                inset -5px -5px 15px rgba(0, 0, 0, 0.1);
            border: 8px solid #333;
            position: relative;
            align-items: center;
            justify-content: center;
            transition: background 0.5s ease, border-color 0.5s ease;
        }

        .analog-clock-wrapper.dark-theme {
            background: radial-gradient(circle at 30% 30%, #3a3a3a, #1a1a1a);
            border-color: #111;
            box-shadow:
                0 30px 60px rgba(0, 0, 0, 0.8),
                inset 0 0 20px rgba(0, 0, 0, 0.5),
                inset 5px 5px 10px rgba(255, 255, 255, 0.1);
        }

        .analog-clock-wrapper.dark-theme .hour-hand,
        .analog-clock-wrapper.dark-theme .minute-hand,
        .analog-clock-wrapper.dark-theme .center-dot,
        .analog-clock-wrapper.dark-theme .marker::after {
            background: white;
        }

        .analog-clock-wrapper.dark-theme .marker.minute::after {
            background: rgba(255, 255, 255, 0.5);
        }

        .analog-clock-wrapper.dark-theme .clock-number {
            color: white;
        }

        .analog-clock {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom center;
            border-radius: 4px;
            z-index: 10;
            transform: translateX(-50%);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .hour-hand {
            width: 8px;
            height: 25%;
            background: black;
            z-index: 11;
        }

        .minute-hand {
            width: 4px;
            height: 35%;
            background: black;
            z-index: 12;
        }

        .second-hand {
            width: 2px;
            height: 48%;
            background: #ff0000;
            z-index: 13;
        }

        .center-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 16px;
            background: black;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 14;
        }

        .marker {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 50%;
            width: 0;
            transform-origin: bottom center;
        }

        .marker::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            background: black;
        }

        .marker.hour::after {
            width: 4px;
            height: 20px;
        }

        .marker.minute::after {
            width: 2px;
            height: 10px;
            background: rgba(0, 0, 0, 0.5);
        }

        .clock-number {
            position: absolute;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(14px, 2.5vmin, 24px);
            font-weight: bold;
            color: black;
            transform: translate(-50%, -50%);
            z-index: 5;
        }
    </style>
</head>

<body>
    <button id="fullscreenBtn" class="fullscreen-btn" title="Teljes k√©perny≈ë">‚õ∂</button>
    <button id="settingsBtn" class="settings-btn" title="Be√°ll√≠t√°sok">‚öôÔ∏è</button>
    <button id="clockModeBtn" class="settings-btn clock-mode-btn" title="√ìra m√≥d v√°lt√°sa">üïí</button>

    <div id="settingsOverlay" class="settings-overlay">
        <div class="settings-panel">
            <h3 style="margin-bottom: 20px;">Csenget√©si rend</h3>
            <div
                style="margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px;">
                <span>Anal√≥g √≥ra s√∂t√©t t√©ma</span>
                <input type="checkbox" id="analogThemeToggle" onchange="toggleAnalogTheme()"
                    style="width: 20px; height: 20px; cursor: pointer;">
            </div>
            <div
                style="margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px;">
                <span>Anal√≥g √≥ra hang (Tik-Tak)</span>
                <input type="checkbox" id="analogSoundToggle" onchange="toggleAnalogSound()"
                    style="width: 20px; height: 20px; cursor: pointer;">
            </div>
            <div id="scheduleList"></div>
            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: space-between;">
                <button class="btn btn-secondary" onclick="addPeriod()">+ √öj √≥ra</button>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" onclick="closeSettings()">M√©gse</button>
                    <button class="btn btn-primary" onclick="saveSettings()">Ment√©s</button>
                </div>
            </div>
            <div style="margin-top: 20px; text-align: center; display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-secondary" onclick="setShortSchedule()"
                    style="font-size: 12px; padding: 5px 10px;">R√∂vid√≠tett rend</button>
                <button class="btn btn-danger" onclick="resetSettings()"
                    style="font-size: 12px; padding: 5px 10px;">Alaphelyzet</button>
            </div>
        </div>
    </div>

    <div class="weather-bar">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center">
                <div style="flex: 1;"></div>
                <div class="d-flex align-items-center justify-content-center gap-3" style="flex: 1;">
                    <div>
                        <span class="weather-icon" id="weatherIcon">‚è≥</span>
                    </div>
                    <div>
                        <span class="weather-temp" id="temperature">-- ¬∞C</span>
                    </div>
                </div>
                <div style="flex: 1; text-align: right;">
                    <div class="countdown-info" id="countdown"></div>
                    <div class="next-class-info" id="nextClass"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="clock-section">
        <div class="clock-wrapper" id="flipClockWrapper">
            <div class="clock-container">
                <div class="flip-unit">
                    <div class="digit" id="hour1">0</div>
                </div>
                <div class="flip-unit">
                    <div class="digit" id="hour2">0</div>
                </div>
                <div class="separator">:</div>
                <div class="flip-unit">
                    <div class="digit" id="min1">0</div>
                </div>
                <div class="flip-unit">
                    <div class="digit" id="min2">0</div>
                </div>
            </div>
        </div>
        <div class="analog-clock-wrapper" id="analogClockWrapper">
            <div class="analog-clock" id="analogClock">
                <div class="hand hour-hand" id="analogHour"></div>
                <div class="hand minute-hand" id="analogMin"></div>
                <div class="hand second-hand" id="analogSec"></div>
                <div class="center-dot"></div>
            </div>
        </div>
    </div>

    <div class="status-bar">
        <div class="container-fluid text-center">
            <div class="bottom-row">
                <div class="date-info" id="dateInfo"></div>
                <div class="day-name-info" id="dayNameInfo"></div>
                <div class="nameday-info" id="nameDay"></div>
            </div>
        </div>
    </div>

    <script>
        const namedays = {
            '01-01': 'Fruzsina', '01-02': '√Åbel', '01-03': 'Genov√©va, Benj√°min', '01-04': 'Titusz, Leona', '01-05': 'Simon',
            '01-06': 'Boldizs√°r', '01-07': 'Attila, Ramona', '01-08': 'Gy√∂ngyv√©r', '01-09': 'Marcell', '01-10': 'Mel√°nia',
            '01-11': '√Ågota', '01-12': 'Ern≈ë', '01-13': 'Veronika', '01-14': 'B√≥dog', '01-15': 'L√≥r√°nt, L√≥r√°nd',
            '01-16': 'Guszt√°v', '01-17': 'Antal, Ant√≥nia', '01-18': 'Piroska', '01-19': 'S√°ra, M√°ri√≥', '01-20': 'F√°bi√°n, Sebesty√©n',
            '01-21': '√Ågnes', '01-22': 'Vince, Art√∫r', '01-23': 'Zelma, Rajmund', '01-24': 'Timea', '01-25': 'P√°l',
            '01-26': 'Paula, Vanda', '01-27': 'Angelika', '01-28': 'K√°roly, Karola', '01-29': 'Ad√©l', '01-30': 'Martina, Gerda',
            '01-31': 'Marcella',
            '02-01': 'Ign√°c', '02-02': 'Karolina, Aida', '02-03': 'Bal√°zs', '02-04': 'R√°hel, Csenge', '02-05': '√Ågota, Ingrid',
            '02-06': 'D√≥ra, Dorottya', '02-07': 'T√≥dor, R√≥me√≥', '02-08': 'Aranka', '02-09': 'Abig√©l, Alex', '02-10': 'Elvira',
            '02-11': 'Bertold, Marietta', '02-12': 'L√≠dia, L√≠via', '02-13': 'Ella, Linda', '02-14': 'B√°lint, Valentin', '02-15': 'Kolos, Georgina',
            '02-16': 'Julianna, Lilla', '02-17': 'Don√°t', '02-18': 'Bernadett', '02-19': 'Zsuzsanna', '02-20': 'Alad√°r, √Ålmos',
            '02-21': 'Eleon√≥ra', '02-22': 'Gerzson', '02-23': 'Alfr√©d', '02-24': 'M√°ty√°s', '02-25': 'G√©za',
            '02-26': 'Edina', '02-27': '√Åkos, B√°tor', '02-28': 'Elem√©r', '02-29': 'Oszk√°r',
            '03-01': 'Albin', '03-02': 'Lujza', '03-03': 'Korn√©lia', '03-04': 'K√°zm√©r', '03-05': 'Adorj√°n, Adri√°n',
            '03-06': 'Leon√≥ra, Inez', '03-07': 'Tam√°s', '03-08': 'Zolt√°n', '03-09': 'Franciska, Fanni', '03-10': 'Ildik√≥',
            '03-11': 'Szil√°rd', '03-12': 'Gergely', '03-13': 'Kriszti√°n, Ajtony', '03-14': 'Matilda', '03-15': 'Krist√≥f',
            '03-16': 'Henrietta', '03-17': 'Gertr√∫d, Patrik', '03-18': 'S√°ndor, Ede', '03-19': 'J√≥zsef, B√°nk', '03-20': 'Klaudia',
            '03-21': 'Benedek', '03-22': 'Be√°ta, Izolda', '03-23': 'Em≈ëke', '03-24': 'G√°bor, Karina', '03-25': 'Ir√©n, Irisz',
            '03-26': 'Em√°nuel', '03-27': 'Hajnalka', '03-28': 'Gedeon, Johanna', '03-29': 'Auguszta', '03-30': 'Zal√°n', '03-31': '√Årp√°d',
            '04-01': 'Hug√≥', '04-02': '√Åron', '04-03': 'Buda, Rich√°rd', '04-04': 'Izidor', '04-05': 'Vince',
            '04-06': 'Vilmos, B√≠borka', '04-07': 'Herman', '04-08': 'D√©nes', '04-09': 'Erhard', '04-10': 'Zsolt',
            '04-11': 'Le√≥, Szaniszl√≥', '04-12': 'Gyula', '04-13': 'Ida', '04-14': 'Tibor', '04-15': 'Anaszt√°zia, Tas',
            '04-16': 'Csongor', '04-17': 'Rudolf', '04-18': 'Andrea, Ilma', '04-19': 'Emma', '04-20': 'Tivadar',
            '04-21': 'Konr√°d', '04-22': 'Csilla, No√©mi', '04-23': 'B√©la', '04-24': 'Gy√∂rgy', '04-25': 'M√°rk',
            '04-26': 'Ervin', '04-27': 'Zita', '04-28': 'Val√©ria', '04-29': 'P√©ter', '04-30': 'Katalin, Kitti',
            '05-01': 'F√ºl√∂p, Jakab', '05-02': 'Zsigmond', '05-03': 'T√≠mea, Irma', '05-04': 'M√≥nika, Fl√≥ri√°n', '05-05': 'Gy√∂rgyi',
            '05-06': 'Ivett, Frida', '05-07': 'Gizella', '05-08': 'Mih√°ly', '05-09': 'Gergely', '05-10': '√Årmin, P√°lma',
            '05-11': 'Ferenc', '05-12': 'Pongr√°c', '05-13': 'Szerv√°c, Imola', '05-14': 'Bonif√°c', '05-15': 'Zs√≥fia, Szonja',
            '05-16': 'M√≥zes, Botond', '05-17': 'Paszk√°l', '05-18': 'Erik, Alexandra', '05-19': 'Iv√≥, Mil√°n', '05-20': 'Bern√°t, Fel√≠cia',
            '05-21': 'Konstantin', '05-22': 'J√∫lia, Rita', '05-23': 'Dezs≈ë', '05-24': 'Eliza, Eszter', '05-25': 'Orb√°n',
            '05-26': 'F√ºl√∂p, Evelin', '05-27': 'Hella', '05-28': 'Csan√°d, Emil', '05-29': 'Magdolna', '05-30': 'Zsanett, Janka', '05-31': 'Ang√©la, Petronella',
            '06-01': 'T√ºnde', '06-02': 'K√°rmen, Anita', '06-03': 'Klotild', '06-04': 'Bulcs√∫', '06-05': 'Fatime',
            '06-06': 'Norbert, Cintia', '06-07': 'R√≥bert', '06-08': 'Med√°rd', '06-09': 'F√©lix', '06-10': 'Margit, Gr√©ta',
            '06-11': 'Barnab√°s', '06-12': 'Vill≈ë', '06-13': 'Antal, Anett', '06-14': 'Vazul', '06-15': 'Jol√°n, Vid',
            '06-16': 'Jusztin', '06-17': 'Laura, Alida', '06-18': 'Arnold, Levente', '06-19': 'Gy√°rf√°s', '06-20': 'Rafael',
            '06-21': 'Alajos, Leila', '06-22': 'Paulina', '06-23': 'Zolt√°n', '06-24': 'Iv√°n', '06-25': 'Vilmos',
            '06-26': 'J√°nos, P√°l', '06-27': 'L√°szl√≥', '06-28': 'Levente, Ir√©n', '06-29': 'P√©ter, P√°l', '06-30': 'P√°l',
            '07-01': 'Tiham√©r, Annam√°ria', '07-02': 'Ott√≥', '07-03': 'Korn√©l, Soma', '07-04': 'Ulrik', '07-05': 'Emese, Sarolta',
            '07-06': 'Csaba', '07-07': 'Apoll√≥nia', '07-08': 'Ell√°k', '07-09': 'Lukr√©cia', '07-10': 'Am√°lia',
            '07-11': 'N√≥ra, Lili', '07-12': 'Izabella, Dalma', '07-13': 'Jen≈ë', '07-14': '√ñrs, Stella', '07-15': 'Henrik, Roland',
            '07-16': 'Valter', '07-17': 'Endre, Elek', '07-18': 'Frigyes', '07-19': 'Em√≠lia', '07-20': 'Ill√©s',
            '07-21': 'D√°niel, Daniella', '07-22': 'Magdolna', '07-23': 'Lenke', '07-24': 'Kinga, Kincs≈ë', '07-25': 'Krist√≥f, Jakab',
            '07-26': 'Anna, Anik√≥', '07-27': 'Olga, Lili√°na', '07-28': 'Szabolcs', '07-29': 'M√°rta, Fl√≥ra', '07-30': 'Judit, X√©nia', '07-31': 'Oszk√°r',
            '08-01': 'Bogl√°rka', '08-02': 'Lehel', '08-03': 'Hermina', '08-04': 'Domonkos, Dominika', '08-05': 'Krisztina',
            '08-06': 'Berta, Bettina', '08-07': 'Ibolya', '08-08': 'L√°szl√≥', '08-09': 'Em≈ëd', '08-10': 'L√∂rinc',
            '08-11': 'Zsuzsanna, Tiborc', '08-12': 'Kl√°ra', '08-13': 'Ipoly', '08-14': 'Marcell', '08-15': 'M√°ria',
            '08-16': '√Åbrah√°m', '08-17': 'J√°cint', '08-18': 'Ilona', '08-19': 'Huba', '08-20': 'Istv√°n',
            '08-21': 'S√°muel, Hajna', '08-22': 'Menyh√©rt, Mirjam', '08-23': 'Bence', '08-24': 'Bertalan', '08-25': 'Lajos, Patricia',
            '08-26': 'Izs√≥', '08-27': 'G√°sp√°r', '08-28': '√Ågoston', '08-29': 'Beatrix, Erna', '08-30': 'R√≥zsa', '08-31': 'Bella, Erika',
            '09-01': 'Egyed, Egon', '09-02': 'Rebeka, Dorina', '09-03': 'Hilda', '09-04': 'Roz√°lia', '09-05': 'Viktor, L≈ërinc',
            '09-06': 'Zakari√°s', '09-07': 'Regina', '09-08': 'M√°ria, Adrienn', '09-09': '√Åd√°m', '09-10': 'Nikolett, Hunor',
            '09-11': 'Teod√≥ra', '09-12': 'M√°ria', '09-13': 'Korn√©l', '09-14': 'Rox√°na, Szer√©na', '09-15': 'Enik≈ë, Melitta',
            '09-16': 'Edit', '09-17': 'Zs√≥fia', '09-18': 'Di√°na', '09-19': 'Vilhelmina', '09-20': 'Friderika',
            '09-21': 'M√°t√©, Mirella', '09-22': 'M√≥ric', '09-23': 'Tekla', '09-24': 'Gell√©rt, Merc√©desz', '09-25': 'Eufrozina, Kende',
            '09-26': 'Jusztina', '09-27': 'Adalbert', '09-28': 'Vencel', '09-29': 'Mih√°ly', '09-30': 'Jeromos',
            '10-01': 'Malvin', '10-02': 'Petra', '10-03': 'Helga', '10-04': 'Ferenc', '10-05': 'Aur√©l',
            '10-06': 'Br√∫n√≥, Ren√°ta', '10-07': 'Am√°lia', '10-08': 'Kopp√°ny', '10-09': 'D√©nes', '10-10': 'Gedeon',
            '10-11': 'Brigitta', '10-12': 'Miksa', '10-13': 'K√°lm√°n, Ede', '10-14': 'Hel√©n', '10-15': 'Ter√©z',
            '10-16': 'G√°l', '10-17': 'Hedvig', '10-18': 'Luk√°cs', '10-19': 'N√°ndor', '10-20': 'Vendel',
            '10-21': 'Orsolya', '10-22': 'El≈ëd', '10-23': 'Gy√∂ngyi', '10-24': 'Salamon', '10-25': 'Bianka, Blanka',
            '10-26': 'D√∂m√∂t√∂r', '10-27': 'Szabina', '10-28': 'Simon, Szimonetta', '10-29': 'N√°rcisz', '10-30': 'Alfonz', '10-31': 'Farkas',
            '11-01': 'Marianna', '11-02': 'Achilles', '11-03': 'Gy√∂ngyv√©r', '11-04': 'K√°roly', '11-05': 'Imre',
            '11-06': 'L√©n√°rd', '11-07': 'Rezs≈ë', '11-08': 'Zsombor', '11-09': 'Tivadar', '11-10': 'R√©ka',
            '11-11': 'M√°rton', '11-12': 'J√≥n√°s, Ren√°t√≥', '11-13': 'Szilvia', '11-14': 'Aliz', '11-15': 'Albert, Lip√≥t',
            '11-16': '√ñd√∂n', '11-17': 'Gerg≈ë, Hortenzia', '11-18': 'Jen≈ë', '11-19': 'Erzs√©bet', '11-20': 'Jol√°n',
            '11-21': 'Oliv√©r', '11-22': 'Cec√≠lia', '11-23': 'Kelemen, Klementina', '11-24': 'Emma', '11-25': 'Katalin',
            '11-26': 'Vir√°g', '11-27': 'Virgil', '11-28': 'Stef√°nia', '11-29': 'Taksony', '11-30': 'Andor, Andr√°s',
            '12-01': 'Elza', '12-02': 'Melinda, Vivien', '12-03': 'Ferenc, Ol√≠via', '12-04': 'Borb√°la, Barbara', '12-05': 'Vilma',
            '12-06': 'Mikl√≥s', '12-07': 'Ambrus', '12-08': 'M√°ria', '12-09': 'Nat√°lia', '12-10': 'Judit',
            '12-11': '√Årp√°d', '12-12': 'Gabriella', '12-13': 'Luca, Ot√≠lia', '12-14': 'Szil√°rda', '12-15': 'Val√©r',
            '12-16': 'Etelka, Aletta', '12-17': 'L√°z√°r, Olimpia', '12-18': 'Auguszta', '12-19': 'Viola', '12-20': 'Teofil',
            '12-21': 'Tam√°s', '12-22': 'Z√©no', '12-23': 'Vikt√≥ria', '12-24': '√Åd√°m, √âva', '12-25': 'Eug√©nia',
            '12-26': 'Istv√°n', '12-27': 'J√°nos', '12-28': 'Kamilla', '12-29': 'Tam√°s, Tamara', '12-30': 'D√°vid', '12-31': 'Szilveszter'
        };

        const defaultBecsengetes = [[8, 0], [8, 55], [9, 50], [10, 50], [11, 45], [12, 40], [13, 30], [14, 20]];
        const defaultKicsengetes = [[8, 45], [9, 40], [10, 35], [11, 35], [12, 30], [13, 25], [14, 15], [15, 5]];
        const shortBecsengetes = [[8, 0], [8, 40], [9, 20], [10, 0], [10, 40], [11, 20], [11, 55], [12, 30]];
        const shortKicsengetes = [[8, 30], [9, 10], [9, 50], [10, 30], [11, 10], [11, 50], [12, 25], [13, 0]];

        let becsengetes = JSON.parse(localStorage.getItem('becsengetes')) || JSON.parse(JSON.stringify(defaultBecsengetes));
        let kicsengetes = JSON.parse(localStorage.getItem('kicsengetes')) || JSON.parse(JSON.stringify(defaultKicsengetes));

        let analogTheme = localStorage.getItem('analogTheme') || 'light';
        let analogSoundEnabled = localStorage.getItem('analogSoundEnabled') === 'true';
        let audioCtx = null;

        function toggleAnalogTheme() {
            const checkbox = document.getElementById('analogThemeToggle');
            analogTheme = checkbox.checked ? 'dark' : 'light';
            localStorage.setItem('analogTheme', analogTheme);
            applyAnalogTheme();
        }

        function toggleAnalogSound() {
            const checkbox = document.getElementById('analogSoundToggle');
            analogSoundEnabled = checkbox.checked;
            localStorage.setItem('analogSoundEnabled', analogSoundEnabled);

            if (analogSoundEnabled && !audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume().catch(e => console.log(e));
            }
            return audioCtx;
        }

        function playTick() {
            if (!analogSoundEnabled || !isAnalog) return;
            const ctx = initAudio();
            if (!ctx) return;

            try {
                const t = ctx.currentTime;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();

                osc.connect(gain);
                gain.connect(ctx.destination);

                const isTick = new Date().getSeconds() % 2 === 0;
                osc.frequency.setValueAtTime(isTick ? 800 : 600, t);
                osc.frequency.exponentialRampToValueAtTime(100, t + 0.03);

                gain.gain.setValueAtTime(0.05, t);
                gain.gain.exponentialRampToValueAtTime(0.001, t + 0.03);

                osc.start(t);
                osc.stop(t + 0.03);
            } catch (e) {
                console.error("Audio error", e);
            }
        }

        function playWarningSound() {
            const ctx = initAudio();
            if (!ctx) return;

            try {
                const t = ctx.currentTime;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();

                osc.connect(gain);
                gain.connect(ctx.destination);

                // Figyelmeztet≈ë hang (magasabb pittyeg√©s)
                osc.frequency.setValueAtTime(1200, t);
                osc.frequency.exponentialRampToValueAtTime(800, t + 0.1);

                gain.gain.setValueAtTime(0.1, t);
                gain.gain.exponentialRampToValueAtTime(0.001, t + 0.1);

                osc.start(t);
                osc.stop(t + 0.1);
            } catch (e) {
                console.error("Audio error", e);
            }
        }

        function applyAnalogTheme() {
            const wrapper = document.getElementById('analogClockWrapper');
            const checkbox = document.getElementById('analogThemeToggle');
            if (analogTheme === 'dark') {
                wrapper.classList.add('dark-theme');
                if (checkbox) checkbox.checked = true;
            } else {
                wrapper.classList.remove('dark-theme');
                if (checkbox) checkbox.checked = false;
            }

            const soundCheckbox = document.getElementById('analogSoundToggle');
            if (soundCheckbox) soundCheckbox.checked = analogSoundEnabled;
        }

        function updateScheduleState() {
            const now = new Date();
            const totalSeconds = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
            let isClass = false;
            let targetTime = -1;
            let text = '';
            let nextClassText = '';

            // Check classes
            for (let i = 0; i < becsengetes.length; i++) {
                const start = becsengetes[i][0] * 3600 + becsengetes[i][1] * 60;
                const end = kicsengetes[i][0] * 3600 + kicsengetes[i][1] * 60;

                if (totalSeconds >= start && totalSeconds < end) {
                    isClass = true;
                    targetTime = end;
                    text = '√ìra v√©ge:';
                    if (i + 1 < becsengetes.length) {
                        nextClassText = `K√∂vetkez≈ë: ${i + 2}. √≥ra`;
                    } else {
                        nextClassText = 'Utols√≥ √≥ra';
                    }
                    break;
                }

                if (i < becsengetes.length - 1) {
                    const nextStart = becsengetes[i + 1][0] * 3600 + becsengetes[i + 1][1] * 60;
                    if (totalSeconds >= end && totalSeconds < nextStart) {
                        targetTime = nextStart;
                        text = 'Sz√ºnet v√©ge:';
                        nextClassText = `K√∂vetkez≈ë: ${i + 2}.√≥ra`;
                        break;
                    }
                }
            }

            // Before first class
            const firstStart = becsengetes[0][0] * 3600 + becsengetes[0][1] * 60;
            if (totalSeconds < firstStart) {
                targetTime = firstStart;
                text = 'Kezd√©sig:';
                nextClassText = 'K√∂vetkez≈ë: 1. √≥ra';
            }

            // Update Colors
            const color = isClass ? '#ff4444' : '#4caf50';
            document.documentElement.style.setProperty('--digit-color', color);
            const background = isClass
                ? 'linear-gradient(135deg, #501a1a 0%, #2a0a0a 100%)'
                : 'linear-gradient(135deg, #1a501a 0%, #0a2a0a 100%)';
            document.body.style.background = background;

            const el = document.getElementById('countdown');
            const nextEl = document.getElementById('nextClass');

            if (targetTime !== -1) {
                const diff = targetTime - totalSeconds;
                const m = Math.floor(diff / 60);
                const s = diff % 60;
                el.textContent = `${text} ${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
                nextEl.textContent = nextClassText;

                if (diff <= 5 && diff > 0) {
                    playWarningSound();
                }
            } else {
                const lastEnd = kicsengetes[kicsengetes.length - 1][0] * 3600 + kicsengetes[kicsengetes.length - 1][1] * 60;
                if (totalSeconds >= lastEnd) {
                    el.textContent = 'Tan√≠t√°s v√©ge';
                    nextEl.textContent = '';
                } else {
                    el.textContent = '';
                    nextEl.textContent = '';
                }
            }
        }

        let prevTime = ['0', '0', '0', '0'];

        function updateAnalogClock() {
            const now = new Date();
            const seconds = now.getSeconds();
            const minutes = now.getMinutes();
            const hours = now.getHours();

            const secDeg = ((seconds / 60) * 360);
            const minDeg = ((minutes / 60) * 360) + ((seconds / 60) * 6);
            const hourDeg = ((hours / 12) * 360) + ((minutes / 60) * 30);

            document.getElementById('analogSec').style.transform = `translateX(-50%) rotate(${secDeg}deg)`;
            document.getElementById('analogMin').style.transform = `translateX(-50%) rotate(${minDeg}deg)`;
            document.getElementById('analogHour').style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
            playTick();
        }

        function updateClock() {
            const now = new Date();
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');

            const time = [h[0], h[1], m[0], m[1]];
            const ids = ['hour1', 'hour2', 'min1', 'min2'];

            time.forEach((digit, i) => {
                if (digit !== prevTime[i]) {
                    const el = document.getElementById(ids[i]);
                    el.style.animation = 'none';
                    setTimeout(() => {
                        el.textContent = digit;
                        el.style.animation = 'flip 0.6s ease-in-out';
                    }, 10);
                }
            });

            prevTime = time;
            updateScheduleState();
            updateAnalogClock();
        }

        function getWeekNumber(d) {
            d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
            var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
            var weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
            return weekNo;
        }

        function updateDate() {
            const now = new Date();
            const days = ['Vas√°rnap', 'H√©tf≈ë', 'Kedd', 'Szerda', 'Cs√ºt√∂rt√∂k', 'P√©ntek', 'Szombat'];

            const weekNum = getWeekNumber(now);
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const dateStr = `${year}.${month}.${day}. H:${weekNum}`;
            document.getElementById('dateInfo').textContent = dateStr;
            document.getElementById('dayNameInfo').textContent = days[now.getDay()];

            const key = `${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;
            const name = namedays[key] || '';
            document.getElementById('nameDay').textContent = name ? `${name}` : '';
        }

        function getWeatherSVG(id) {
            const sun = `<g><circle cx="32" cy="32" r="12" fill="#ffeb3b"><animateTransform attributeName="transform" type="scale" values="1;1.1;1" dur="3s" repeatCount="indefinite"/></circle><g stroke="#ffeb3b" stroke-width="3" stroke-linecap="round"><line x1="32" y1="8" x2="32" y2="2"/><line x1="32" y1="62" x2="32" y2="56"/><line x1="8" y1="32" x2="2" y2="32"/><line x1="62" y1="32" x2="56" y2="32"/><line x1="15" y1="15" x2="11" y2="11"/><line x1="53" y1="53" x2="49" y2="49"/><line x1="15" y1="49" x2="11" y2="53"/><line x1="53" y1="15" x2="49" y2="11"/><animateTransform attributeName="transform" type="rotate" from="0 32 32" to="360 32 32" dur="20s" repeatCount="indefinite"/></g></g>`;
            const cloud = `<path d="M46 24c0-6.6-5.4-12-12-12-5.3 0-9.8 3.4-11.4 8.1C21.5 19.7 20.3 19.5 19 19.5c-5.5 0-10 4.5-10 10 0 .4 0 .8.1 1.2C4.9 32.3 2 36.3 2 41c0 5.5 4.5 10 10 10h34c6.6 0 12-5.4 12-12 0-6.2-4.7-11.3-10.8-11.9.5-1.9.8-3.9.8-6.1z" fill="#e0e0e0"><animateTransform attributeName="transform" type="translate" values="0 0; 0 -2; 0 0" dur="3s" repeatCount="indefinite"/></path>`;
            const rain = `<g stroke="#4fc3f7" stroke-width="2" stroke-linecap="round"><line x1="20" y1="45" x2="16" y2="52"><animate attributeName="y1" values="45;48;45" dur="1s" repeatCount="indefinite"/><animate attributeName="y2" values="52;55;52" dur="1s" repeatCount="indefinite"/></line><line x1="32" y1="45" x2="28" y2="52"><animate attributeName="y1" values="45;48;45" dur="1s" begin="0.3s" repeatCount="indefinite"/><animate attributeName="y2" values="52;55;52" dur="1s" begin="0.3s" repeatCount="indefinite"/></line><line x1="44" y1="45" x2="40" y2="52"><animate attributeName="y1" values="45;48;45" dur="1s" begin="0.6s" repeatCount="indefinite"/><animate attributeName="y2" values="52;55;52" dur="1s" begin="0.6s" repeatCount="indefinite"/></line></g>`;
            const snow = `<g fill="#fff"><circle cx="20" cy="48" r="2"><animate attributeName="cy" values="45;55" dur="2s" repeatCount="indefinite"/></circle><circle cx="32" cy="48" r="2"><animate attributeName="cy" values="45;55" dur="2s" begin="0.6s" repeatCount="indefinite"/></circle><circle cx="44" cy="48" r="2"><animate attributeName="cy" values="45;55" dur="2s" begin="1.2s" repeatCount="indefinite"/></circle></g>`;
            const thunder = `<path d="M30 36 L24 48 L30 48 L26 60 L38 46 L32 46 L36 36 Z" fill="#ffeb3b"><animate attributeName="opacity" values="1;0;1;0;1" dur="2s" repeatCount="indefinite"/></path>`;
            const mist = `<g stroke="#bdbdbd" stroke-width="2" stroke-linecap="round"><line x1="10" y1="25" x2="54" y2="25"><animate attributeName="x1" values="10;15;10" dur="5s" repeatCount="indefinite"/><animate attributeName="x2" values="54;49;54" dur="5s" repeatCount="indefinite"/></line><line x1="15" y1="35" x2="49" y2="35"><animate attributeName="x1" values="15;10;15" dur="4s" repeatCount="indefinite"/><animate attributeName="x2" values="49;54;49" dur="4s" repeatCount="indefinite"/></line><line x1="10" y1="45" x2="54" y2="45"><animate attributeName="x1" values="10;15;10" dur="6s" repeatCount="indefinite"/><animate attributeName="x2" values="54;49;54" dur="6s" repeatCount="indefinite"/></line></g>`;

            let content = '';
            if (id >= 200 && id < 300) content = cloud + thunder;
            else if (id >= 300 && id < 600) content = cloud + rain;
            else if (id >= 600 && id < 700) content = cloud + snow;
            else if (id >= 700 && id < 800) content = mist;
            else if (id === 800) content = sun;
            else if (id === 801) content = `<g transform="translate(8, -8) scale(0.8)">${sun}</g><g transform="translate(0, 10)">${cloud}</g>`;
            else content = cloud;

            return `<svg viewBox="0 0 64 64" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">${content}</svg>`;
        }

        async function updateWeather() {
            try {
                const apiUrl = 'https://api.openweathermap.org/data/2.5/weather?q=Csorna,HU&appid=999f84c7f5fb31dabe7ca36b796248ea&units=metric&lang=hu';

                const response = await fetch(apiUrl);

                if (!response.ok) {
                    throw new Error('API hiba');
                }

                const data = await response.json();

                if (data.main && data.weather) {
                    const temp = Math.round(data.main.temp);
                    document.getElementById('temperature').textContent = `${temp}¬∞C`;

                    const weatherId = data.weather[0].id;
                    document.getElementById('weatherIcon').innerHTML = getWeatherSVG(weatherId);
                } else {
                    document.getElementById('temperature').textContent = 'N/A';
                    document.getElementById('weatherIcon').textContent = '‚ùì';
                }
            } catch (error) {
                console.error('Id≈ëj√°r√°s bet√∂lt√©si hiba:', error);
                document.getElementById('temperature').textContent = 'Hiba';
                document.getElementById('weatherIcon').textContent = '‚ö†Ô∏è';
            }
        }

        // Settings logic
        const settingsBtn = document.getElementById('settingsBtn');
        const settingsOverlay = document.getElementById('settingsOverlay');
        const scheduleList = document.getElementById('scheduleList');

        settingsBtn.addEventListener('click', () => {
            renderSettings();
            settingsOverlay.style.display = 'flex';
        });

        window.closeSettings = function () {
            settingsOverlay.style.display = 'none';
        }

        function renderSettings() {
            scheduleList.innerHTML = '';
            becsengetes.forEach((start, i) => {
                const end = kicsengetes[i] || [0, 0];
                const row = document.createElement('div');
                row.className = 'schedule-row';
                row.innerHTML = `
                    <span style="width: 60px;">${i + 1}. √≥ra</span>
                    <input type="time" value="${formatTime(start)}" class="start-time">
                    <span>-</span>
                    <input type="time" value="${formatTime(end)}" class="end-time">
                    <button class="btn btn-danger" onclick="removePeriod(${i})" style="padding: 5px 10px;">√ó</button>
                `;
                scheduleList.appendChild(row);
            });
        }

        function formatTime(arr) {
            return `${String(arr[0]).padStart(2, '0')}:${String(arr[1]).padStart(2, '0')}`;
        }

        window.addPeriod = function () {
            becsengetes.push([0, 0]);
            kicsengetes.push([0, 0]);
            renderSettings();
        }

        window.removePeriod = function (index) {
            becsengetes.splice(index, 1);
            kicsengetes.splice(index, 1);
            renderSettings();
        }

        window.saveSettings = function () {
            const rows = document.querySelectorAll('.schedule-row');
            const newBecsengetes = [];
            const newKicsengetes = [];

            rows.forEach(row => {
                const start = row.querySelector('.start-time').value.split(':').map(Number);
                const end = row.querySelector('.end-time').value.split(':').map(Number);
                newBecsengetes.push(start);
                newKicsengetes.push(end);
            });

            becsengetes = newBecsengetes;
            kicsengetes = newKicsengetes;
            localStorage.setItem('becsengetes', JSON.stringify(becsengetes));
            localStorage.setItem('kicsengetes', JSON.stringify(kicsengetes));
            closeSettings();
            updateClock(); // Immediate update
        }

        window.resetSettings = function () {
            if (confirm('Biztosan vissza√°ll√≠tod az alap√©rtelmezett csenget√©si rendet?')) {
                becsengetes = JSON.parse(JSON.stringify(defaultBecsengetes));
                kicsengetes = JSON.parse(JSON.stringify(defaultKicsengetes));
                renderSettings();
            }
        }

        window.setShortSchedule = function () {
            if (confirm('Biztosan √°tv√°ltasz a r√∂vid√≠tett csenget√©si rendre?')) {
                becsengetes = JSON.parse(JSON.stringify(shortBecsengetes));
                kicsengetes = JSON.parse(JSON.stringify(shortKicsengetes));
                renderSettings();
            }
        }

        // Analog Clock Setup
        function initAnalogClock() {
            const clock = document.getElementById('analogClock');

            for (let i = 0; i < 60; i++) {
                const marker = document.createElement('div');
                marker.className = i % 5 === 0 ? 'marker hour' : 'marker minute';
                marker.style.transform = `rotate(${i * 6}deg)`;
                clock.appendChild(marker);
            }

            for (let i = 1; i <= 12; i++) {
                const number = document.createElement('div');
                number.className = 'clock-number';
                number.textContent = i;
                const angle = (i * 30) - 90;
                const rad = angle * (Math.PI / 180);
                const radius = 38;
                const left = 50 + (radius * Math.cos(rad));
                const top = 50 + (radius * Math.sin(rad));
                number.style.left = `${left}%`;
                number.style.top = `${top}%`;
                clock.appendChild(number);
            }
        }

        initAnalogClock();
        applyAnalogTheme();

        // Clock Mode Toggle
        const clockModeBtn = document.getElementById('clockModeBtn');
        const flipClockWrapper = document.getElementById('flipClockWrapper');
        const analogClockWrapper = document.getElementById('analogClockWrapper');
        let isAnalog = false;

        clockModeBtn.addEventListener('click', () => {
            isAnalog = !isAnalog;
            if (isAnalog) {
                flipClockWrapper.style.display = 'none';
                analogClockWrapper.style.display = 'flex';
                clockModeBtn.textContent = 'üî¢';
            } else {
                flipClockWrapper.style.display = 'block';
                analogClockWrapper.style.display = 'none';
                clockModeBtn.textContent = 'üïí';
            }
        });

        const fullscreenBtn = document.getElementById('fullscreenBtn');

        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Hiba a teljes k√©perny≈ëre v√°lt√°skor: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        });

        document.addEventListener('fullscreenchange', () => {
            fullscreenBtn.textContent = document.fullscreenElement ? '‚ùå' : '‚õ∂';
        });

        setInterval(updateClock, 1000);
        setInterval(updateDate, 60000);
        setInterval(updateWeather, 1000 * 60 * 30)

        updateClock();
        updateDate();
        updateWeather();
    </script>
</body>

</html>